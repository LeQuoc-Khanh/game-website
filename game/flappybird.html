<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flappy Block Game</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            overflow: hidden;
            height: 100vh;
        }
        canvas {
            display: block;
            background-color: #87CEEB;
        }
        button {
            position: absolute;
            font-size: 16px;
            background-color: #ff9800;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            z-index: 10;
        }
        button:hover {
            background-color: #f57c00;
        }

        /* M√¥ t·∫£ game */
        #description {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: left;
            max-width: 80%;
            max-height: 70%;
            overflow-y: auto;
            z-index: 20;
        }

        #description h2 {
            font-size: 28px;
        }

        #description ul {
            list-style-type: none;
            padding-left: 0;
        }

        #description li {
            font-size: 20px;
            margin-bottom: 10px;
        }

        #description button {
            background-color: #ff9800;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            margin-top: 15px;
            transition: background-color 0.3s;
        }

        #description button:hover {
            background-color: #f57c00;
        }

        /* N√∫t ƒê√≥ng */
        #closeBtn {
            position: fixed;
            bottom: 10px;
            right: 10px;
            background-color: #f44336;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            color: white;
            cursor: pointer;
            font-size: 16px;
            z-index: 30;
        }

        #closeBtn:hover {
            background-color: #d32f2f;
        }
    </style>
</head>
<body>
    <!-- M√†n h√¨nh game -->
    <canvas id="gameCanvas"></canvas>

    <!-- N√∫t m√¥ t·∫£ -->
    <button id="descBtn" style="top: 10px;">M√¥ t·∫£</button>

    <!-- N√∫t ƒë√≥ng -->
    <button id="closeBtn">ƒê√≥ng Game</button>

    <!-- M√¥ t·∫£ game -->
    <div id="description">
        <h2>M√¥ t·∫£ game</h2>
        <p><strong>Flappy Block</strong> l√† m·ªôt tr√≤ ch∆°i ƒë∆°n gi·∫£n, n∆°i b·∫°n ƒëi·ªÅu khi·ªÉn m·ªôt kh·ªëi vu√¥ng ƒë·ªè ƒë·ªÉ bay qua c√°c ·ªëng xanh l√°. M·ªói khi b·∫°n v∆∞·ª£t qua m·ªôt c·∫∑p ·ªëng, b·∫°n s·∫Ω ghi ƒë∆∞·ª£c ƒëi·ªÉm.</p>
        <h3>üéÆ C√°ch ch∆°i:</h3>
        <ul>
            <li><strong>Nh·∫•n Space</strong> ƒë·ªÉ l√†m kh·ªëi vu√¥ng bay l√™n.</li>
            <li>Tr√°nh va ch·∫°m v·ªõi c√°c ·ªëng. N·∫øu b·∫°n ch·∫°m v√†o ·ªëng, b·∫°n s·∫Ω thua cu·ªôc.</li>
            <li>B·∫°n s·∫Ω ghi ƒëi·ªÉm m·ªói khi v∆∞·ª£t qua m·ªôt c·∫∑p ·ªëng.</li>
            <li>Game ch·ªâ c√≥ m·ªôt ch·∫ø ƒë·ªô ch∆°i v·ªõi m·ª©c ƒë·ªô d·ªÖ.</li>
        </ul>
        <button onclick="toggleDescription()">ƒê√≥ng</button>
    </div>

    <script>
        var canvas = document.getElementById("gameCanvas");
        var ctx = canvas.getContext("2d");

        // Thi·∫øt l·∫≠p k√≠ch th∆∞·ªõc canvas ƒë·ªÉ ph√π h·ª£p v·ªõi m√†n h√¨nh
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        var block = { x: 50, y: canvas.height / 2, width: 30, height: 30, gravity: 0.8, lift: -15, velocity: 0 };
        var pipes = [];
        var pipeWidth = 50;
        var pipeGap = 250;
        var pipeSpeed = 2;
        var score = 0;
        var gameInterval;
        var pipeInterval;
        var isGameOver = false;
        var isPaused = false;

        // H√†m v·∫Ω kh·ªëi vu√¥ng
        function drawBlock() {
            ctx.fillStyle = "#FF0000";
            ctx.fillRect(block.x, block.y, block.width, block.height);
        }

        // H√†m v·∫Ω ·ªëng
        function drawPipes() {
            pipes.forEach(function(pipe) {
                ctx.fillStyle = "#228B22";
                ctx.fillRect(pipe.x, 0, pipeWidth, pipe.top);
                ctx.fillRect(pipe.x, pipe.bottom, pipeWidth, canvas.height - pipe.bottom);
            });
        }

        // H√†m v·∫Ω ƒëi·ªÉm s·ªë
        function drawScore() {
            ctx.fillStyle = "#000";
            ctx.font = "20px Arial";
            ctx.textAlign = "center"; // CƒÉn gi·ªØa vƒÉn b·∫£n
            ctx.fillText("Score: " + score, canvas.width / 2, 30); // ƒê·∫∑t ·ªü gi·ªØa ƒë·∫ßu m√†n h√¨nh
            ctx.textAlign = "start"; // ƒê·∫∑t l·∫°i cƒÉn tr√°i ƒë·ªÉ kh√¥ng ·∫£nh h∆∞·ªüng c√°c ph·∫ßn kh√°c
        }

        // H√†m v·∫Ω game over
        function drawGameOver() {
            ctx.fillStyle = "#000";
            ctx.font = "40px Arial";
            ctx.textAlign = "center"; // CƒÉn gi·ªØa vƒÉn b·∫£n
            ctx.fillText("Game Over", canvas.width / 2, canvas.height / 2);
            ctx.font = "20px Arial";
            ctx.fillText("Nh·∫•n F5 ƒë·ªÉ ch∆°i l·∫°i", canvas.width / 2, canvas.height / 2 + 40);
            ctx.textAlign = "start"; // ƒê·∫∑t l·∫°i cƒÉn tr√°i
        }

        // H√†m c·∫≠p nh·∫≠t game
        function updateGame() {
            if (isGameOver) return;
            block.velocity += block.gravity;
            block.y += block.velocity;

            if (block.y + block.height > canvas.height) {
                block.y = canvas.height - block.height;
                block.velocity = 0;
            } else if (block.y < 0) {
                block.y = 0;
                block.velocity = 0;
            }

            if (pipes.length === 0 || pipes[pipes.length - 1].x < canvas.width - 400) {
                var pipeTop = Math.random() * (canvas.height - pipeGap);
                var pipeBottom = pipeTop + pipeGap;
                pipes.push({ x: canvas.width, top: pipeTop, bottom: pipeBottom });
            }

            pipes.forEach(function(pipe, index) {
                pipe.x -= pipeSpeed;
                if (pipe.x + pipeWidth < 0) {
                    pipes.splice(index, 1);
                    score++;
                }

                if (pipe.x < block.x + block.width && pipe.x + pipeWidth > block.x) {
                    if (block.y < pipe.top || block.y + block.height > pipe.bottom) {
                        isGameOver = true;
                    }
                }
            });

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawPipes();
            drawBlock();
            drawScore();
            if (isGameOver) {
                drawGameOver();
            }
        }

        // H√†m kh·ªüi ƒë·ªông l·∫°i game
        function resetGame() {
            block.y = canvas.height / 2;
            block.velocity = 0;
            pipes = [];
            score = 0;
            isGameOver = false;
            gameInterval = setInterval(updateGame, 1000 / 60);
        }

        // H√†m nh·∫£y (Spacebar)
        window.addEventListener("keydown", function(event) {
            if (event.code === "Space" && !isGameOver) {
                block.velocity = block.lift;
            }
        });

        // Th√™m s·ª± ki·ªán cho n√∫t "M√¥ t·∫£"
        document.getElementById("descBtn").addEventListener("click", toggleDescription);

        // Th√™m s·ª± ki·ªán cho n√∫t "ƒê√≥ng Game"
        document.getElementById("closeBtn").addEventListener("click", closeGame);

        // H√†m hi·ªÉn th·ªã/·∫©n m√¥ t·∫£
        function toggleDescription() {
            const desc = document.getElementById("description");
            if (desc.style.display === "none" || desc.style.display === "") {
                desc.style.display = "block";
            } else {
                desc.style.display = "none";
            }
        }

        // H√†m ƒë√≥ng game
        function closeGame() {
            if (confirm("B·∫°n ch·∫Øc ch·∫Øn mu·ªën ƒë√≥ng game?")) {
                window.close();
            }
        }

        // Kh·ªüi ƒë·ªông game khi trang web load
        window.onload = function() {
            resetGame();
        };
    </script>
</body>
</html>